<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics-Based Stock Market Solar System</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
            color: white;
            font-family: Arial, sans-serif;
        }
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 100;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
            max-width: 300px;
        }
        #controls {
            position: absolute;
            bottom: 10px;
            left: 10px;
            z-index: 100;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
        }
        button {
            background: #444;
            color: white;
            border: none;
            padding: 5px 10px;
            margin: 5px;
            border-radius: 3px;
            cursor: pointer;
        }
        button:hover {
            background: #666;
        }
        #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            z-index: 1000;
        }
        .slider-container {
            margin: 10px 0;
        }
        .slider-container label {
            display: block;
            margin-bottom: 5px;
        }
        .slider {
            width: 100%;
        }
        #center-of-mass {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 100;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
            max-width: 300px;
        }
        .mass-line {
            position: absolute;
            background: rgba(255, 255, 0, 0.3);
            transform-origin: 0 0;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div id="info">
        <h2>Stock Market Solar System</h2>
        <p>Planet size = Stock Weight</p>
        <p>Distance from center = Inverse Relationship with Total Gravity</p>
        <p>Revolution speed = Momentum</p>
        <p>Click on a planet to see details</p>
        <div id="planet-info"></div>
    </div>
    <div id="center-of-mass">
        <h3>Center of Mass</h3>
        <div id="mass-info">Calculating...</div>
    </div>
    <div id="controls">
        <button id="togglePhysics">Physics: ON</button>
        <button id="toggleOrbits">Show Orbits: ON</button>
        <button id="resetView">Reset View</button>
        <button id="toggleMassCenter">Show Mass Center: ON</button>
        <button id="toggleMassLines">Show Mass Lines: OFF</button>
        <div class="slider-container">
            <label for="timeScale">Time Scale:</label>
            <input type="range" id="timeScale" class="slider" min="0.1" max="5" step="0.1" value="1">
        </div>
        <div class="slider-container">
            <label for="gravityStrength">Gravity Strength:</label>
            <input type="range" id="gravityStrength" class="slider" min="0.1" max="5" step="0.1" value="1">
        </div>
        <div class="slider-container">
            <label for="sizeScale">Planet Size Scale:</label>
            <input type="range" id="sizeScale" class="slider" min="0.5" max="3" step="0.1" value="1">
        </div>
    </div>
    <div id="loading">Loading Universe...</div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script>
        // Parse the distance matrix from the CSV content
        const distanceCsvContent = `,ADANIENT.NS,ADANIPORTS.NS,APOLLOHOSP.NS,ASIANPAINT.NS,AXISBANK.NS,BAJAJ-AUTO.NS,BAJFINANCE.NS,BAJAJFINSV.NS,BEL.NS,BHARTIARTL.NS,CIPLA.NS,COALINDIA.NS,DRREDDY.NS,EICHERMOT.NS,ETERNAL.NS,GRASIM.NS,HCLTECH.NS,HDFCBANK.NS,HDFCLIFE.NS,HINDALCO.NS,HINDUNILVR.NS,ICICIBANK.NS,INFY.NS,INDIGO.NS,ITC.NS,JIOFIN.NS,JSWSTEEL.NS,KOTAKBANK.NS,LT.NS,M&M.NS,MARUTI.NS,MAXHEALTH.NS,NESTLEIND.NS,NTPC.NS,ONGC.NS,POWERGRID.NS,RELIANCE.NS,SBILIFE.NS,SBIN.NS,SHRIRAMFIN.NS,SUNPHARMA.NS,TATACONSUM.NS,TATAMOTORS.NS,TATASTEEL.NS,TCS.NS,TECHM.NS,TITAN.NS,TRENT.NS,ULTRACEMCO.NS,WIPRO.NS
ADANIENT.NS,0.0,0.18874040261639768,0.16655376079594786,0.22553773605781235,0.20558562956454274,0.3826040448587765,0.2128748241785292,0.17211745055278582,0.2911189198960442,0.2969491999198717,0.18029730935532462,0.28660118132910706,0.4616385292843026,0.19850311901276974,0.8424084414719141,0.16586118213493617,0.2772248204976785,0.2871005427147332,0.9062751721398751,0.1918638838824097,0.2633540492391129,0.14219945026530179,0.27031281438970944,0.3307975767660353,0.22085492041255173,0.3621803509598568,0.1397155731449119,0.4650090346879906,0.2263204971791053,0.2863734353980265,0.22269138292334378,0.29499638004815276,0.24568327576050997,0.2891881879351318,0.2700388583606602,0.26356999638588474,0.16706673492999258,0.1582837798367862,0.13420910944207787,0.34387084871031215,0.2147484680151247,0.16934635464622727,0.22270067205316435,0.17826457133278228,0.2373384995310165,0.3427187000225421,0.1360128555672171,0.41802492722140094,0.2515037145060538,0.5574640115866086
ADANIPORTS.NS,0.18874040261639768,0.0,0.08759076915176978,0.39426217331381364,0.10243030727613434,0.08184010570946221,0.3001897609958363,0.2480657176561023,0.07101045847086418,0.08661457643436177,0.05172591944705485,0.07931046574715106,0.17980303239772677,0.07881512552337744,0.17652727141563107,0.04807738370752379,0.08725720873522935,0.28554999755300303,0.6333497791426177,0.08119933678350222,0.34176873559122867,0.08555274001169888,0.21426447047322694,0.06997540723463769,0.19657505150357168,0.12941251607785675,0.1139139778590913,0.5572089895469275,0.08264489870574232,0.0917486606569039,0.09531518202164191,0.09748366236797656,0.13632436156273986,0.07363010586852337,0.05696688371718994,0.055065653167419626,0.11067161588577656,0.08222797106342705,0.05756490768537026,0.07459571394532882,0.06265352983225914,0.056195889650326514,0.047976995406492806,0.08923695298245304,0.10108496742167761,0.1874138970253174,0.12483636081723681,0.12445034994221282,0.06287215867797646,0.4191277562622002
APOLLOHOSP.NS,0.16655376079594786,0.08759076915176978,0.0,0.24467889847988855,0.09756685005674215,0.18067121535285657,0.1529300041492092,0.1124045518860397,0.13704413618916955,0.1245626872650617,0.07487715234247472,0.15975468682852434,0.22571393965871445,0.10441926998703888,0.1018870181301812,0.02632587573239975,0.04704656210558256,0.1673620774146537,0.6454713340668312,0.04467645082737337,0.2637737431582011,0.04493827141225948,0.10802298247768216,0.11981685296695177,0.1512118272970986,0.30146710006599176,0.042446003042595604,0.44445357120565254,0.07761251656985857,0.14170918700313562,0.12550742563875106,0.053018637610959374,0.1262520563351205,0.13750727918825312,0.10084135718279441,0.10563398986419337,0.10494708930549279,0.06485840978675217,0.04937562202784285,0.1271797218585513,0.06980233599112518,0.05669699266263406,0.07636932805063912,0.05040422248365639,0.0420304652059732,0.07777717226551728,0.05064795983594228,0.20214671085902658,0.04451835122658454,0.3098435128372583
ASIANPAINT.NS,0.22553773605781235,0.39426217331381364,0.24467889847988855,0.0,0.3607144662147025,0.6291300655887686,0.07340033985882088,0.10921895497612988,0.57050139406716,0.5685456900060987,0.37298932577604393,0.591267785142493,0.5399644463322293,0.4104973344136744,1.2001487937411965,0.2759519331824547,0.396565025519385,0.23089383478551484,0.6541696104675441,0.260700599004158,0.2593724865251098,0.31278576124973767,0.204114508291229,0.5207787860245321,0.4282572273012655,1.4210637540534066,0.195187580197817,0.23252183815104688,0.428613600151854,0.5565074957399273,0.4327154446789575,0.6446283869159183,0.39650632395197205,0.5650761318978494,0.49512756725475127,0.5223633088429264,0.28466200749952697,0.3012889897639782,0.33733559237748134,0.5288878984347167,0.45355121426573153,0.26027401419979956,0.39201859812156814,0.2248257209783484,0.24595263020570424,0.282660915680522,0.2525241239512521,0.6887402972095006,0.34581422383995797,0.3051996139571158
AXISBANK.NS,0.20558562956454274,0.10243030727613434,0.09756685005674215,0.3607144662147025,0.0,0.14468469077742063,0.22698337082458453,0.21566880664371257,0.11046208787195766,0.12433541429329675,0.11456016591256202,0.10749929195507257,0.23770742648506626,0.07097048018476848,0.30351801283875,0.0641570958932719,0.10848817491090956,0.1580261353157324,0.6407058769857461,0.10831850482039374,0.26305191703958386,0.04336373366005697,0.27806706273292503,0.0999515531467714,0.09360732183876608,0.3162972900278772,0.09111884039304186,0.4626080460508474,0.047237200982788496,0.10954603125805795,0.07465595537395564,0.06996722993828519,0.09726847528596272,0.09982438131013505,0.09282329097660369,0.09587609531383146,0.17828068439447065,0.08378016950473288,0.04745813830772638,0.09279652313416298,0.09061714112017227,0.1031967525476779,0.08003210085647183,0.10502153183721841,0.13659862123325994,0.2199855350413753,0.08166686771254039,0.19074130090493857,0.054922976773523424,0.5241292657258418
BAJAJ-AUTO.NS,0.3826040448587765,0.08184010570946221,0.18067121535285657,0.6291300655887686,0.14468469077742063,0.0,0.4989377954990888,0.4398124819551973,0.03655372365359555,0.038754738013593304,0.09328722911024534,0.03544190513200285,0.1347806453239938,0.09251160009493975,0.13594129115116904,0.13621487738558513,0.10361763317493122,0.4000217905180371,0.6414367874320193,0.1927745359680776,0.41049392788864103,0.14457141780374339,0.3768564619133161,0.030786061298433087,0.1774010154831548,0.1488675945843022,0.23634539129099097,0.7665190884322365,0.08820658021173733,0.047059116666462675,0.0887557016282734,0.08436249190084033,0.13288961670695365,0.027241038305505616,0.05363818675768428,0.035054679935193955,0.21416803478723168,0.1339545509510297,0.1329034974683947,0.032939709650461,0.05809488762863546,0.14559111284151327,0.08109421225198232,0.21511719546224606,0.20345282700674683,0.2850152741284654,0.2029574436226539,0.029466965070463313,0.10246535967087422,0.6080931153005579
BAJFINANCE.NS,0.2128748241785292,0.3001897609958363,0.1529300041492092,0.07340033985882088,0.22698337082458453,0.4989377954990888,0.0,0.0336956591457348,0.43593744501181986,0.4265981648337267,0.29916140503193756,0.46185489386729384,0.4847805377503418,0.3030601745477355,0.6923049625667186,0.17756450962249193,0.2770477986409514,0.14748995579518576,0.6040874165729422,0.16345562491202592,0.28678978795335164,0.19843792394398807,0.15867661003920597,0.3856942046580403,0.33744296280258246,1.455837729117123,0.13208488031314436,0.19848800729123617,0.2949948019924389,0.4239195243307041,0.319281551810799,0.4009375563355896,0.3172967764078415,0.4356764644462029,0.37172248540763164,0.39577352258485354,0.2367728478294131,0.21485737369488833,0.21972149276018427,0.3847612214512178,0.3402626027549289,0.20014074418542005,0.2878333323733252,0.14311128617691515,0.1701135055502283,0.17748437045647458,0.16431582563145108,0.5448444780539771,0.23345012919918384,0.2662116914905671
BAJAJFINSV.NS,0.17211745055278582,0.2480657176561023,0.1124045518860397,0.10921895497612988,0.21566880664371257,0.4398124819551973,0.0336956591457348,0.0,0.37807805583770027,0.3488550086759672,0.26190943715993587,0.3971099723910424,0.4888350795718852,0.27925549307843933,0.48061594056521306,0.14027796804824144,0.23482414885130198,0.17900494295488334,0.6502557632429717,0.12033351565151684,0.2832746001354458,0.16329170510145674,0.12897568002921045,0.3377843092038899,0.3224370711890282,0.739640811284678,0.11452627961084472,0.26242130227099647,0.26288040141842073,0.3760456656533768,0.30350852931402184,0.33833762369428955,0.29558870536731174,0.37271083271928596,0.30996716758005727,0.33680280676666585,0.21797644693645402,0.15654808496820438,0.17639745186082523,0.34180586897818077,0.2781430140260731,0.18015419094646912,0.2509132163632811,0.11773602479282363,0.15095125590357228,0.13447929773579903,0.14136392813800958,0.4642612291118243,0.2059041400425229,0.25442482857109205
BEL.NS,0.2911189198960442,0.07101045847086418,0.13704413618916955,0.57050139406716,0.11046208787195766,0.03655372365359555,0.43593744501181986,0.37807805583770027,0.0,0.018874399347666215,0.07402625630833548,0.02717830159641521,0.170295018976926,0.052359923862588476,0.16528798076274254,0.0947002447167341,0.0930769750162126,0.3395004147332761,0.7324230754764709,0.15342784412815258,0.36195498707193074,0.08618932630174947,0.3376492359613359,0.026944047806718885,0.12206544832421928,0.17985814370252262,0.18438433386181485,0.7321035955486126,0.05877851879363516,0.013843856949626865,0.06809049357885222,0.040517299548863295,0.1217733183779166,0.020738980652172945,0.03986068176293156,0.012126316845782137,0.17806595365706834,0.10858576765833172,0.07391415939635126,0.04861858637201932,0.03604029110647056,0.13601323966945678,0.06924788738244281,0.17735752647017855,0.1820166211741997,0.2470878854955435,0.15386230534988354,0.03944719106871064,0.08195871021399559,0.6055022451355934
BHARTIARTL.NS,0.2969491999198717,0.08661457643436177,0.1245626872650617,0.5685456900060987,0.12433541429329675,0.038754738013593304,0.4265981648337267,0.3488550086759672,0.018874399347666215,0.0,0.0790888190850314,0.03938158057827912,0.19330294461525765,0.06962599772823241,0.12748410473827676,0.09526225645401787,0.07679540932231976,0.3395537191195449,0.7200333058711865,0.14521734479600734,0.356467116804143,0.08346445526923285,0.3144931710706611,0.03199744004995986,0.12490710444535558,0.22651156368941083,0.18690876636780307,0.725039601471919,0.06589165953914977,0.022907598704009047,0.08551575042019399,0.031323129609788114,0.12952445087895914,0.02465845325543803,0.0448642712706262,0.020024970306309342,0.19310039884948715,0.09609319598866073,0.08245244558519549,0.04604444592468082,0.0249505729374353,0.1488288084822431,0.0818709162872222,0.18730275633866023,0.1758425439287522,0.2185915061691195,0.14873930558730297,0.027595022818127757,0.08762823432452493,0.5878042335424198
CIPLA.NS,0.18029730935532462,0.05172591944705485,0.07487715234247472,0.37298932577604393,0.11456016591256202,0.09328722911024534,0.29916140503193756,0.26190943715993587,0.07402625630833548,0.0790888190850314,0.0,0.08669173785676687,0.11510202902095279,0.059894087391598405,0.20149940339670736,0.05776101143637158,0.06030646636894932,0.26974265683405063,0.6515125231296566,0.09566730389133549,0.2916374437246192,0.07717059141067906,0.19937475029030394,0.0822956196112199,0.13717991101141924,0.18583500041556444,0.09697798778177535,0.6037125094572995,0.06878356135988895,0.07429610947008247,0.07373490916896941,0.057622792132097644,0.10353908715185745,0.07288272031545107,0.07383688462368443,0.06079066933413568,0.08349271508904754,0.07555252586476058,0.07344552697910556,0.08861256933891415,0.03601344367110915,0.05185342482789701,0.06435288831049613,0.10255370186449764,0.0907127341721482,0.19328507472942202,0.09298600314073235,0.12543420338719602,0.07016125303080001,0.4573011514670263
COALINDIA.NS,0.28660118132910706,0.07931046574715106,0.15975468682852434,0.591267785142493,0.10749929195507257,0.03544190513200285,0.46185489386729384,0.3971099723910424,0.02717830159641521,0.03938158057827912,0.08669173785676687,0.0,0.18702893989162028,0.0750386906262207,0.23236188935820268,0.12300247053548352,0.11339958055794641,0.40165503675607206,0.7867419330410425,0.1812220056056595,0.39073282433902834,0.10885005482637988,0.39670804810767013,0.053151735617879003,0.11119483537054176,0.1578242720278673,0.2145844867267196,0.7670992722535664,0.04547737270052399,0.050178084968687586,0.05558773812667317,0.053721926042784696,0.08719064976452273,0.007625086149180116,0.02648704863511475,0.019387362076761838,0.18501636819559986,0.1062830378480758,0.09094958229065064,0.06463954439820618,0.04249728161663624,0.12779929234835363,0.05330820405814041,0.1978167268427936,0.21115621897145176,0.30793169257044073,0.13408971667403224,0.06655982290998042,0.10693491903900187,0.6825125438373374
DRREDDY.NS,0.4616385292843026,0.17980303239772677,0.22571393965871445,0.5399644463322293,0.23770742648506626,0.1347806453239938,0.4847805377503418,0.4888350795718852,0.170295018976926,0.19330294461525765,0.11510202902095279,0.18702893989162028,0.0,0.1738522264414324,0.15139644630111393,0.19906351442348036,0.14017424111900068,0.36981694902106266,0.46499688105000425,0.2689703299757106,0.39474049756767093,0.24608442785220375,0.3454472248967462,0.14476268166431405,0.262960944021181,0.33396599886276757,0.247836822977063,0.7151195297548726,0.17543159125241348,0.17067827506966815,0.17957426855338932,0.2191037906645127,0.17230687948861667,0.1656265331708321,0.18208027566280505,0.1727770607500555,0.21815596574936236,0.23493720691304598,0.25374465896556975,0.13719182096692528,0.1634639468618856,0.1632442659648342,0.17169393432403457,0.252711786168359,0.1981105157327232,0.30418777502977845,0.26236321553764796,0.18278551597734005,0.14482466739540045,0.5052005887635517
EICHERMOT.NS,0.19850311901276974,0.07881512552337744,0.10441926998703888,0.4104973344136744,0.07097048018476848,0.09251160009493975,0.3030601745477355,0.27925549307843933,0.052359923862588476,0.06962599772823241,0.059894087391598405,0.0750386906262207,0.1738522264414324,0.0,0.2591840743430561,0.06556071646842909,0.08988736846347045,0.20789538843491828,0.6719893426186603,0.1316592023527211,0.24814520564508746,0.046554000423420505,0.2711618341985831,0.06380853564360234,0.09087753574822566,0.21861946952463374,0.12026335589150283,0.5477609539020702,0.06303473120193237,0.03965353122511506,0.043431026928473226,0.06191701578085651,0.11114245039579973,0.06855484161316094,0.08699789309376493,0.05511023284343253,0.13585346019619204,0.0811885928533681,0.05399598881326051,0.08317586764367146,0.05188512308584914,0.09936853975138749,0.08079001771250505,0.1434739566449802,0.13712668163815112,0.2354229547747123,0.10898545209425636,0.11383958375097791,0.07063655655128454,0.5557958906416861
ETERNAL.NS,0.8424084414719141,0.17652727141563107,0.1018870181301812,1.2001487937411965,0.30351801283875,0.13594129115116904,0.6923049625667186,0.48061594056521306,0.16528798076274254,0.12748410473827676,0.20149940339670736,0.23236188935820268,0.15139644630111393,0.2591840743430561,0.0,0.11757067843787483,0.10399700155964253,0.471332100350194,0.3444792227113037,0.15718914980679588,0.6890142665976317,0.23374176842779837,0.2416952503811154,0.10672171776227868,0.488592224580502,0.263708869306317,0.2007237361659152,1.1164155625732624,0.24864577200767468,0.18862592540377565,0.3117076698255846,0.16890683564749887,0.3507218547239044,0.1910279318187489,0.18775449514157483,0.17238172073797275,0.3288283330792231,0.20527723166528467,0.22859387085027094,0.10303616928423387,0.1738571130407629,0.23872405692282406,0.23019522253628866,0.17187204997260774,0.09907326426695207,0.12590626492121448,0.37997660944979017,0.09985650101493804,0.1145473912670385,0.4827902561226628
GRASIM.NS,0.16586118213493617,0.04807738370752379,0.02632587573239975,0.2759519331824547,0.0641570958932719,0.13621487738558513,0.17756450962249193,0.14027796804824144,0.0947002447167341,0.09526225645401787,0.05776101143637158,0.12300247053548352,0.19906351442348036,0.06556071646842909,0.11757067843787483,0.0,0.05353480324446891,0.15653824455970278,0.6172083884314236,0.03246660631878873,0.2547753269201888,0.028923504457749605,0.13024230900816725,0.07990025740691131,0.13966466920192622,0.21108685572844266,0.037393566190551675,0.44651464438772526,0.06366054094972118,0.09582523886448735,0.09247005942877162,0.051461017227759864,0.12511235237669116,0.10354372944021273,0.07334603873524481,0.07333798339802733,0.1040856194214822,0.05426788821627282,0.02624528596878528,0.08792236307378609,0.055617491200196434,0.053310424422886915,0.05437460540961003,0.04347803768256475,0.04892427313838965,0.100704822780177,0.06643851066224782,0.15955967732608378,0.02478628038077202,0.3447334881354618
HCLTECH.NS,0.2772248204976785,0.08725720873522935,0.04704656210558256,0.396565025519385,0.10848817491090956,0.10361763317493122,0.2770477986409514,0.23482414885130198,0.0930769750162126,0.07679540932231976,0.06030646636894932,0.11339958055794641,0.14017424111900068,0.08988736846347045,0.10399700155964253,0.05353480324446891,0.0,0.21023803569776778,0.5701135612734081,0.08284918718883483,0.32471675982543635,0.07313178627345052,0.1467706965408233,0.0735999349075428,0.1580762887472308,0.457068271413108,0.10202820155827941,0.5407060630637257,0.0644970192323493,0.0939872119171723,0.11448432134851427,0.04710018577178221,0.1310731119432027,0.08751164158723923,0.07508855067078113,0.06995254160591036,0.13294275698108604,0.08869156587297622,0.0831147882715666,0.07149208011652108,0.041737446337709594,0.08368822196450909,0.0798032470430794,0.11051109638720535,0.049359861615283385,0.09503981596899402,0.09690784616000292,0.11183225333762936,0.03787272964529964,0.35752728757544094
HDFCBANK.NS,0.2871005427147332,0.28554999755300303,0.1673620774146537,0.23089383478551484,0.1580261353157324,0.4000217905180371,0.14748995579518576,0.17900494295488334,0.3395004147332761,0.3395537191195449,0.26974265683405063,0.40165503675607206,0.36981694902106266,0.20789538843491828,0.471332100350194,0.15653824455970278,0.21023803569776778,0.0,0.5148010552528403,0.17706372693910322,0.23675196872038162,0.14848205932934233,0.18075549502786525,0.2923107266113293,0.26180724481455053,0.7645286645044597,0.12154737616176248,0.2147480230071288,0.2538187138088551,0.29454616387412336,0.28479656860799496,0.2954998997810665,0.3178793170728401,0.3679965850338054,0.3353189161442547,0.32608646478953995,0.27373319241252025,0.23357007551397702,0.18696280246658603,0.2868099528794541,0.2751939343040736,0.24017060599849704,0.29142203720487747,0.18313529597571765,0.15677892773391533,0.1977883962270125,0.21938200382026207,0.4165043980560891,0.1646758545308331,0.34791995146046195
HDFCLIFE.NS,0.9062751721398751,0.6333497791426177,0.6454713340668312,0.6541696104675441,0.6407058769857461,0.6414367874320193,0.6040874165729422,0.6502557632429717,0.7324230754764709,0.7200333058711865,0.6515125231296566,0.7867419330410425,0.46499688105000425,0.6719893426186603,0.3444792227113037,0.6172083884314236,0.5701135612734081,0.5148010552528403,0.0,0.6394392623742237,0.6360375726819006,0.7109522568707085,0.5450432976605504,0.609524525131524,0.8291021976192273,0.9973164674940456,0.6418068623599413,0.5197122985928747,0.7071021987753086,0.7030289024469147,0.7244359120450572,0.8799774466687249,0.7024745125122255,0.7357813885054867,0.7285468129664174,0.7441448306381768,0.6889661615762941,0.6207794680119416,0.7421847847921246,0.5409352834802067,0.7217399507384792,0.6093026384617601,0.6868869829053614,0.6357583412308178,0.540026773331677,0.5149247734694036,0.766676292201119,0.6676070960365305,0.5455853551096094,0.43180816138159284
HINDALCO.NS,0.1918638838824097,0.08119933678350222,0.04467645082737337,0.260700599004158,0.10831850482039374,0.1927745359680776,0.16345562491202592,0.12033351565151684,0.15342784412815258,0.14521734479600734,0.09566730389133549,0.1812220056056595,0.2689703299757106,0.1316592023527211,0.15718914980679588,0.03246660631878873,0.08284918718883483,0.17706372693910322,0.6394392623742237,0.0,0.3243990173943503,0.07882543913936912,0.10106384254572631,0.12552512313234265,0.21615488512511416,0.23142590627458137,0.04794564964626957,0.43796256305150183,0.11560784545697245,0.16270777423236416,0.1543415759232606,0.12135197130698772,0.18590667993444443,0.16040722866573975,0.11055245733263341,0.12299910872967235,0.11780337552944153,0.09195688255995571,0.06548114952219175,0.14931233970942215,0.1009615540169646,0.08089478357511903,0.098148562500038,0.031016296500327,0.05053068456016707,0.08166461588384855,0.09646554768207971,0.21559707345611023,0.06755645799740273,0.27654998846787726
HINDUNILVR.NS,0.2633540492391129,0.34176873559122867,0.2637737431582011,0.2593724865251098,0.26305191703958386,0.41049392788864103,0.28678978795335164,0.2832746001354458,0.36195498707193074,0.356467116804143,0.2916374437246192,0.39073282433902834,0.39474049756767093,0.24814520564508746,0.6890142665976317,0.2547753269201888,0.32471675982543635,0.23675196872038162,0.6360375726819006,0.3243990173943503,0.0,0.23269429695576382,0.3417280591245876,0.3526279771760811,0.24265869148295904,0.9641864472655615,0.22638811432985895,0.45716363844869123,0.3214295437935112,0.32157662598070647,0.3277649692972867,0.39261938300396837,0.2657427428530943,0.3732959693676501,0.3855418805263321,0.3664265990789687,0.3325688223022125,0.21135555249885674,0.2794330906244763,0.34464391653589266,0.30930981252714573,0.26025780944511223,0.3504224171631194,0.29554930880058805,0.3024746630044597,0.38646687294742066,0.27507654276251625,0.4291553601077749,0.2615051715491835,0.5907850273293206
ICICIBANK.NS,0.14219945026530179,0.08555274001169888,0.04493827141225948,0.31278576124973767,0.04336373366005697,0.14457141780374339,0.19843792394398807,0.16329170510145674,0.08618932630174947,0.08346445526923285,0.07717059141067906,0.10885005482637988,0.24608442785220375,0.046554000423420505,0.23374176842779837,0.028923504457749605,0.07313178627345052,0.14848205932934233,0.7109522568707085,0.07882543913936912,0.23269429695576382,0.0,0.19974412158210264,0.08971594116400361,0.07380905758577228,0.2495637519855456,0.05712137121576155,0.45847402717436436,0.048230615616614125,0.0759199607044414,0.06995126377858352,0.035023965452455674,0.11315738381219498,0.09172980348913784,0.08155983940417377,0.06885068323747157,0.13320241188002402,0.05101438328002461,0.014070350681827604,0.09417935056587046,0.045409850360460635,0.09040949406726717,0.06933174324069491,0.08810569504918242,0.09837227744054411,0.15686338786559617,0.05279955169682038,0.15804990750597092,0.050032661516811405,0.47116723383067627
INFY.NS,0.27031281438970944,0.21426447047322694,0.10802298247768216,0.204114508291229,0.27806706273292503,0.3768564619133161,0.15867661003920597,0.12897568002921045,0.3376492359613359,0.3144931710706611,0.19937475029030394,0.39670804810767013,0.3454472248967462,0.2711618341985831,0.2416952503811154,0.13024230900816725,0.1467706965408233,0.18075549502786525,0.5450432976605504,0.10106384254572631,0.3417280591245876,0.19974412158210264,0.0,0.2907372909002336,0.39978627191107896,0.5651335121752166,0.12458369083617427,0.34228225011558766,0.29209597630382833,0.3245535642698123,0.3306065507079987,0.3085043669770662,0.3680172134080768,0.3612228043794007,0.29200794209670355,0.30028481944953056,0.19182101533274465,0.1995750706174645,0.20591069995720646,0.29654825121835604,0.2409926999552071,0.17473612849575848,0.26032408678477525,0.13031137697541972,0.06122309837783979,0.0609813362462891,0.22204379817219488,0.3720871726695022,0.1762719853125062,0.12604058687511588
INDIGO.NS,0.3307975767660353,0.06997540723463769,0.11981685296695177,0.5207787860245321,0.0999515531467714,0.030786061298433087,0.3856942046580403,0.3377843092038899,0.026944047806718885,0.03199744004995986,0.0822956196112199,0.053151735617879003,0.14476268166431405,0.06380853564360234,0.10672171776227868,0.07990025740691131,0.0735999349075428,0.2923107266113293,0.609524525131524,0.12552512313234265,0.3526279771760811,0.08971594116400361,0.2907372909002336,0.0,0.15262836489289544,0.1666975625917354,0.16777304365524015,0.6449571243148698,0.06755118953230443,0.03284595977496685,0.07152952116123679,0.062042210520237395,0.1251073325069857,0.039024470247040255,0.04462141112677631,0.028634043847788226,0.17835628214863086,0.0997923292762044,0.08238714856986995,0.02933130771115866,0.0474410025729568,0.12163743494750645,0.062131600346314486,0.1541803565621167,0.14062181717576783,0.19090936091416255,0.15488449026555595,0.0423893732446593,0.059560302633152484,0.5123739673634724
ITC.NS,0.22085492041255173,0.19657505150357168,0.1512118272970986,0.4282572273012655,0.09360732183876608,0.1774010154831548,0.33744296280258246,0.3224370711890282,0.12206544832421928,0.12490710444535558,0.13717991101141924,0.11119483537054176,0.262960944021181,0.09087753574822566,0.488592224580502,0.13966466920192622,0.1580762887472308,0.26180724481455053,0.8291021976192273,0.21615488512511416,0.24265869148295904,0.07380905758577228,0.39978627191107896,0.15262836489289544,0.0,0.7166370265557718,0.15819922487308624,0.6337762744095623,0.06719727621352944,0.10903422651218764,0.08455736529039326,0.09859223664165151,0.08797248459853069,0.10136980276218044,0.12049550815717691,0.10892132958802037,0.20296990126174586,0.11499528036362083,0.1025554658162301,0.15406074755130095,0.08847721452228507,0.1637440859269036,0.11749915514461651,0.2165175996470763,0.23429525743396062,0.33488865117777356,0.08306925961713463,0.20458027087930497,0.1337871124770581,0.7425641080149136
JIOFIN.NS,0.3621803509598568,0.12941251607785675,0.30146710006599176,1.4210637540534066,0.3162972900278772,0.1488675945843022,1.455837729117123,0.739640811284678,0.17985814370252262,0.22651156368941083,0.18583500041556444,0.1578242720278673,0.33396599886276757,0.21861946952463374,0.263708869306317,0.21108685572844266,0.457068271413108,0.7645286645044597,0.9973164674940456,0.23142590627458137,0.9641864472655615,0.2495637519855456,0.5651335121752166,0.1666975625917354,0.7166370265557718,0.0,0.2972502584142218,1.116456396856289,0.23585492800103347,0.2492000884575618,0.10797226170515706,0.28521514915141366,0.6198460038534807,0.17177495577583712,0.15238224338492112,0.14062537693714605,0.21093790427360415,0.44754446830218364,0.10158379200865875,0.2800481544669373,0.22389881524587296,0.3442800075314716,0.1670008947173527,0.08714520426089467,0.302194659456147,0.5070964189152929,0.7302041357875011,0.2781251123169213,0.3186731050146442,0.37177979879397816
JSWSTEEL.NS,0.1397155731449119,0.1139139778590913,0.042446003042595604,0.195187580197817,0.09111884039304186,0.23634539129099097,0.13208488031314436,0.11452627961084472,0.18438433386181485,0.18690876636780307,0.09697798778177535,0.2145844867267196,0.247836822977063,0.12026335589150283,0.2007237361659152,0.037393566190551675,0.10202820155827941,0.12154737616176248,0.6418068623599413,0.04794564964626957,0.22638811432985895,0.05712137121576155,0.12458369083617427,0.16777304365524015,0.15819922487308624,0.2972502584142218,0.0,0.40500817086881624,0.11504095961792127,0.17571035059253703,0.15526654373116988,0.10154805251952004,0.16616161667915552,0.18937669378812727,0.15557453927135234,0.15554055846281523,0.13057390276205916,0.09429983572926748,0.06402346164900385,0.16893364876521744,0.11314278729226024,0.07774755666912347,0.12197191895856174,0.031657105680173436,0.06930937069235099,0.13271471717363337,0.08019064928098885,0.27013565633195236,0.06714487174084571,0.32229225818666185
KOTAKBANK.NS,0.4650090346879906,0.5572089895469275,0.44445357120565254,0.23252183815104688,0.4626080460508474,0.7665190884322365,0.19848800729123617,0.26242130227099647,0.7321035955486126,0.725039601471919,0.6037125094572995,0.7670992722535664,0.7151195297548726,0.5477609539020702,1.1164155625732624,0.44651464438772526,0.5407060630637257,0.2147480230071288,0.5197122985928747,0.43796256305150183,0.45716363844869123,0.45847402717436436,0.34228225011558766,0.6449571243148698,0.6337762744095623,1.116456396856289,0.40500817086881624,0.0,0.6052505707781306,0.6942353969797418,0.5980717986207794,0.9164075648636133,0.6247039445299983,0.7454543798725513,0.6706725902348805,0.6955500052320532,0.5058157200020181,0.5087102598318869,0.49272493226364134,0.6290340764260549,0.6472560459161154,0.4828159455112966,0.5814565201459629,0.43333187242463156,0.4011741497697391,0.40323499759941983,0.47824991068749834,0.8114877757618927,0.49257996898186884,0.36242734080746186
LT.NS,0.2263204971791053,0.08264489870574232,0.07761251656985857,0.428613600151854,0.047237200982788496,0.08820658021173733,0.2949948019924389,0.26288040141842073,0.05877851879363516,0.06589165953914977,0.06878356135988895,0.04547737270052399,0.17543159125241348,0.06303473120193237,0.24864577200767468,0.06366054094972118,0.0644970192323493,0.2538187138088551,0.7071021987753086,0.11560784545697245,0.3214295437935112,0.048230615616614125,0.29209597630382833,0.06755118953230443,0.06719727621352944,0.23585492800103347,0.11504095961792127,0.6052505707781306,0.0,0.0725622066150774,0.046396776825180286,0.03692293188239737,0.04911950671158283,0.037560083055312554,0.040078122048088693,0.04149537517077051,0.1484141015546886,0.07445087613670143,0.04970115936458741,0.0656633341202606,0.03752284380373716,0.08073498677690538,0.03407590725701071,0.1176386457894738,0.12913265127024876,0.2097167291798402,0.04942620826668653,0.12921705390697524,0.04558879245690994,0.5551291075175544
M&M.NS,0.2863734353980265,0.0917486606569039,0.14170918700313562,0.5565074957399273,0.10954603125805795,0.047059116666462675,0.4239195243307041,0.3760456656533768,0.013843856949626865,0.022907598704009047,0.07429610947008247,0.050178084968687586,0.17067827506966815,0.03965353122511506,0.18862592540377565,0.09582523886448735,0.0939872119171723,0.29454616387412336,0.7030289024469147,0.16270777423236416,0.32157662598070647,0.0759199607044414,0.3245535642698123,0.03284595977496685,0.10903422651218764,0.2492000884575618,0.17571035059253703,0.6942353969797418,0.0725622066150774,0.0,0.0656085363654072,0.05158019356288923,0.14062901256977223,0.036536484842914385,0.06626840165548409,0.026126441624083396,0.18856903282988113,0.1082772431218818,0.07724843092381728,0.047825782165515696,0.03724754240769612,0.15335454634848555,0.09109671787425644,0.1916391084164656,0.18292257456639227,0.2499375081636236,0.16350604565239601,0.04061068569904536,0.08680513964755443,0.6150546516717803
MARUTI.NS,0.22269138292334378,0.09531518202164191,0.12550742563875106,0.4327154446789575,0.07465595537395564,0.0887557016282734,0.319281551810799,0.30350852931402184,0.06809049357885222,0.08551575042019399,0.07373490916896941,0.05558773812667317,0.17957426855338932,0.043431026928473226,0.3117076698255846,0.09247005942877162,0.11448432134851427,0.28479656860799496,0.7244359120450572,0.1543415759232606,0.3277649692972867,0.06995126377858352,0.3306065507079987,0.07152952116123679,0.08455736529039326,0.10797226170515706,0.15526654373116988,0.5980717986207794,0.046396776825180286,0.0656085363654072,0.0,0.08089159844117921,0.07977437410324295,0.05515273643723806,0.05998741462120949,0.05475504238080686,0.12307157630700505,0.08228615810882678,0.06614299486183406,0.09369373045118434,0.05956351528808035,0.09458563806242093,0.04569403146210316,0.15570701537841913,0.16187640827737682,0.27061322482528527,0.08489394069958056,0.13930653592126785,0.09788799349455035,0.6191803011553594
MAXHEALTH.NS,0.29499638004815276,0.09748366236797656,0.053018637610959374,0.6446283869159183,0.06996722993828519,0.08436249190084033,0.4009375563355896,0.33833762369428955,0.040517299548863295,0.031323129609788114,0.057622792132097644,0.053721926042784696,0.2191037906645127,0.06191701578085651,0.16890683564749887,0.051461017227759864,0.04710018577178221,0.2954998997810665,0.8799774466687249,0.12135197130698772,0.39261938300396837,0.035023965452455674,0.3085043669770662,0.062042210520237395,0.09859223664165151,0.28521514915141366,0.10154805251952004,0.9164075648636133,0.03692293188239737,0.05158019356288923,0.08089159844117921,0.0,0.1079264182094456,0.03958225693329942,0.050393763111243994,0.02965495763045345,0.13372138091179675,0.08507436874996055,0.042496315664994566,0.06725281737623845,0.021578405366040943,0.10166492413127537,0.06857322098015384,0.13693192180566327,0.10528131576016453,0.2181825229083445,0.09015426762762124,0.08173345057437853,0.050756001059119926,0.7311505692785225
NESTLEIND.NS,0.24568327576050997,0.13632436156273986,0.1262520563351205,0.39650632395197205,0.09726847528596272,0.13288961670695365,0.3172967764078415,0.29558870536731174,0.1217733183779166,0.12952445087895914,0.10353908715185745,0.08719064976452273,0.17230687948861667,0.11114245039579973,0.3507218547239044,0.12511235237669116,0.1310731119432027,0.3178793170728401,0.7024745125122255,0.18590667993444443,0.2657427428530943,0.11315738381219498,0.3680172134080768,0.1251073325069857,0.08797248459853069,0.6198460038534807,0.16616161667915552,0.6247039445299983,0.04911950671158283,0.14062901256977223,0.07977437410324295,0.1079264182094456,0.0,0.08804026687870559,0.09463957203076012,0.10297228099169609,0.155614453724763,0.10111894357825835,0.11927275783636371,0.13084367513652284,0.0973327534849503,0.08463606591578732,0.06964453596410813,0.16307390931351762,0.1876446447289959,0.2926171479760248,0.0706858002102847,0.20389943217199347,0.09600446908470228,0.6164752381763787
NTPC.NS,0.2891881879351318,0.07363010586852337,0.13750727918825312,0.5650761318978494,0.09982438131013505,0.027241038305505616,0.4356764644462029,0.37271083271928596,0.020738980652172945,0.02465845325543803,0.07288272031545107,0.007625086149180116,0.1656265331708321,0.06855484161316094,0.1910279318187489,0.10354372944021273,0.08751164158723923,0.3679965850338054,0.7357813885054867,0.16040722866573975,0.3732959693676501,0.09172980348913784,0.3612228043794007,0.039024470247040255,0.10136980276218044,0.17177495577583712,0.18937669378812727,0.7454543798725513,0.037560083055312554,0.036536484842914385,0.05515273643723806,0.03958225693329942,0.08804026687870559,0.0,0.024077588824985896,0.012731037343501894,0.17793690126518502,0.09150915719970809,0.08321148881295926,0.043081744701712554,0.02745767291428214,0.12004361500990679,0.05012971328163596,0.18159010175826829,0.18727509328886616,0.2664326608878219,0.12416276428082307,0.0488010848486774,0.08550814759967817,0.6404797361777634
ONGC.NS,0.2700388583606602,0.05696688371718994,0.10084135718279441,0.49512756725475127,0.09282329097660369,0.05363818675768428,0.37172248540763164,0.30996716758005727,0.03986068176293156,0.0448642712706262,0.07383688462368443,0.02648704863511475,0.18208027566280505,0.08699789309376493,0.18775449514157483,0.07334603873524481,0.07508855067078113,0.3353189161442547,0.7285468129664174,0.11055245733263341,0.3855418805263321,0.08155983940417377,0.29200794209670355,0.04462141112677631,0.12049550815717691,0.15238224338492112,0.15557453927135234,0.6706725902348805,0.040078122048088693,0.06626840165548409,0.05998741462120949,0.050393763111243994,0.09463957203076012,0.024077588824985896,0.0,0.017473587443741945,0.13453396480496693,0.07810141443050178,0.05929751109264492,0.0611784821018001,0.032194288881163935,0.089635842362775,0.02228268536064404,0.13037113256624322,0.13038147020902724,0.20651936341427146,0.1000301937239696,0.08657328358249705,0.06961505995034878,0.5390861367167006
POWERGRID.NS,0.26356999638588474,0.055065653167419626,0.10563398986419337,0.5223633088429264,0.09587609531383146,0.035054679935193955,0.39577352258485354,0.33680280676666585,0.012126316845782137,0.020024970306309342,0.06079066933413568,0.019387362076761838,0.1727770607500555,0.05511023284343253,0.17238172073797275,0.07333798339802733,0.06995254160591036,0.32608646478953995,0.7441448306381768,0.12299910872967235,0.3664265990789687,0.06885068323747157,0.30028481944953056,0.028634043847788226,0.10892132958802037,0.14062537693714605,0.15554055846281523,0.6955500052320532,0.04149537517077051,0.026126441624083396,0.05475504238080686,0.02965495763045345,0.10297228099169609,0.012731037343501894,0.017473587443741945,0.0,0.1479152650129667,0.08632061117243639,0.055468148394582806,0.045960476475865764,0.019176855727519038,0.10485719787319436,0.04056091587257982,0.1467607365430048,0.1454602237873901,0.21835127003472798,0.11523646378546082,0.050422933449099094,0.06792518374410639,0.5681814684336431
RELIANCE.NS,0.16706673492999258,0.11067161588577656,0.10494708930549279,0.28466200749952697,0.17828068439447065,0.21416803478723168,0.2367728478294131,0.21797644693645402,0.17806595365706834,0.19310039884948715,0.08349271508904754,0.18501636819559986,0.21815596574936236,0.13585346019619204,0.3288283330792231,0.1040856194214822,0.13294275698108604,0.27373319241252025,0.6889661615762941,0.11780337552944153,0.3325688223022125,0.13320241188002402,0.19182101533274465,0.17835628214863086,0.20296990126174586,0.21093790427360415,0.13057390276205916,0.5058157200020181,0.1484141015546886,0.18856903282988113,0.12307157630700505,0.13372138091179675,0.155614453724763,0.17793690126518502,0.13453396480496693,0.1479152650129667,0.0,0.1113440957686368,0.1161632328799802,0.21742882265889107,0.12826285591648134,0.05592736901406792,0.09806513610533119,0.11620612142046671,0.10126582290189612,0.20789607495589513,0.10405427132639755,0.27471741072083034,0.1408928694897581,0.4057577849667974
SBILIFE.NS,0.1582837798367862,0.08222797106342705,0.06485840978675217,0.3012889897639782,0.08378016950473288,0.1339545509510297,0.21485737369488833,0.15654808496820438,0.10858576765833172,0.09609319598866073,0.07555252586476058,0.1062830378480758,0.23493720691304598,0.0811885928533681,0.20527723166528467,0.05426788821627282,0.08869156587297622,0.23357007551397702,0.6207794680119416,0.09195688255995571,0.21135555249885674,0.05101438328002461,0.1995750706174645,0.0997923292762044,0.11499528036362083,0.44754446830218364,0.09429983572926748,0.5087102598318869,0.07445087613670143,0.1082772431218818,0.08228615810882678,0.08507436874996055,0.10111894357825835,0.09150915719970809,0.07810141443050178,0.08632061117243639,0.1113440957686368,0.0,0.05941806972535313,0.10073898580142082,0.06060368692155338,0.06715836599348046,0.06740140491470092,0.10259893778968554,0.10602236231613127,0.16263186248056138,0.06856843298942739,0.15802545552866853,0.07366623907943781,0.46046745146324053
SBIN.NS,0.13420910944207787,0.05756490768537026,0.04937562202784285,0.33733559237748134,0.04745813830772638,0.1329034974683947,0.21972149276018427,0.17639745186082523,0.07391415939635126,0.08245244558519549,0.07344552697910556,0.09094958229065064,0.25374465896556975,0.05399598881326051,0.22859387085027094,0.02624528596878528,0.0831147882715666,0.18696280246658603,0.7421847847921246,0.06548114952219175,0.2794330906244763,0.014070350681827604,0.20591069995720646,0.08238714856986995,0.1025554658162301,0.10158379200865875,0.06402346164900385,0.49272493226364134,0.04970115936458741,0.07724843092381728,0.06614299486183406,0.042496315664994566,0.11927275783636371,0.08321148881295926,0.05929751109264492,0.055468148394582806,0.1161632328799802,0.05941806972535313,0.0,0.0974059607289266,0.04643465552191339,0.07808539733259812,0.049654910467283986,0.06978640004703329,0.09738677719402555,0.16684205074969483,0.06263164453581938,0.15763214445324958,0.053659510079073436,0.4597386797884897
SHRIRAMFIN.NS,0.34387084871031215,0.07459571394532882,0.1271797218585513,0.5288878984347167,0.09279652313416298,0.032939709650461,0.3847612214512178,0.34180586897818077,0.04861858637201932,0.04604444592468082,0.08861256933891415,0.06463954439820618,0.13719182096692528,0.08317586764367146,0.10303616928423387,0.08792236307378609,0.07149208011652108,0.2868099528794541,0.5409352834802067,0.14931233970942215,0.34464391653589266,0.09417935056587046,0.29654825121835604,0.02933130771115866,0.15406074755130095,0.2800481544669373,0.16893364876521744,0.6290340764260549,0.0656633341202606,0.047825782165515696,0.09369373045118434,0.06725281737623845,0.13084367513652284,0.043081744701712554,0.0611784821018001,0.045960476475865764,0.21742882265889107,0.10073898580142082,0.0974059607289266,0.0,0.05466828067704499,0.12795990064122276,0.07356526865777546,0.1691079631493878,0.15336299601989656,0.20450856082735602,0.1633513678358891,0.04794209514561487,0.05532065768414951,0.5171881366722619
SUNPHARMA.NS,0.2147484680151247,0.06265352983225914,0.06980233599112518,0.45355121426573153,0.09061714112017227,0.05809488762863546,0.3402626027549289,0.2781430140260731,0.03604029110647056,0.0249505729374353,0.03601344367110915,0.04249728161663624,0.1634639468618856,0.05188512308584914,0.1738571130407629,0.055617491200196434,0.041737446337709594,0.2751939343040736,0.7217399507384792,0.1009615540169646,0.30930981252714573,0.045409850360460635,0.2409926999552071,0.0474410025729568,0.08847721452228507,0.22389881524587296,0.11314278729226024,0.6472560459161154,0.03752284380373716,0.03724754240769612,0.05956351528808035,0.021578405366040943,0.0973327534849503,0.02745767291428214,0.032194288881163935,0.019176855727519038,0.12826285591648134,0.06060368692155338,0.04643465552191339,0.05466828067704499,0.0,0.08732167728728257,0.049434014888059985,0.12387171206802239,0.11143384345871099,0.18628935053014517,0.08407382244588368,0.06743275903003965,0.05840447151537276,0.5246885840024705
TATACONSUM.NS,0.16934635464622727,0.056195889650326514,0.05669699266263406,0.26027401419979956,0.1031967525476779,0.14559111284151327,0.20014074418542005,0.18015419094646912,0.13601323966945678,0.1488288084822431,0.05185342482789701,0.12779929234835363,0.1632442659648342,0.09936853975138749,0.23872405692282406,0.053310424422886915,0.08368822196450909,0.24017060599849704,0.6093026384617601,0.08089478357511903,0.26025780944511223,0.09040949406726717,0.17473612849575848,0.12163743494750645,0.1637440859269036,0.3442800075314716,0.07774755666912347,0.4828159455112966,0.08073498677690538,0.15335454634848555,0.09458563806242093,0.10166492413127537,0.08463606591578732,0.12004361500990679,0.089635842362775,0.10485719787319436,0.05592736901406792,0.06715836599348046,0.07808539733259812,0.12795990064122276,0.08732167728728257,0.0,0.0505512700878723,0.05631514577652663,0.06714664803559645,0.17208134349675464,0.06659747392956572,0.21875581115765552,0.062067210426122066,0.3742653227178532
TATAMOTORS.NS,0.22270067205316435,0.047976995406492806,0.07636932805063912,0.39201859812156814,0.08003210085647183,0.08109421225198232,0.2878333323733252,0.2509132163632811,0.06924788738244281,0.0818709162872222,0.06435288831049613,0.05330820405814041,0.17169393432403457,0.08079001771250505,0.23019522253628866,0.05437460540961003,0.0798032470430794,0.29142203720487747,0.6868869829053614,0.098148562500038,0.3504224171631194,0.06933174324069491,0.26032408678477525,0.062131600346314486,0.11749915514461651,0.1670008947173527,0.12197191895856174,0.5814565201459629,0.03407590725701071,0.09109671787425644,0.04569403146210316,0.06857322098015384,0.06964453596410813,0.05012971328163596,0.02228268536064404,0.04056091587257982,0.09806513610533119,0.06740140491470092,0.049654910467283986,0.07356526865777546,0.049434014888059985,0.0505512700878723,0.0,0.09903228011451515,0.1049509253261548,0.19221416992503348,0.06325384732591899,0.13979279336933004,0.05648846080853065,0.4881286645383981
TATASTEEL.NS,0.17826457133278228,0.08923695298245304,0.05040422248365639,0.2248257209783484,0.10502153183721841,0.21511719546224606,0.14311128617691515,0.11773602479282363,0.17735752647017855,0.18730275633866023,0.10255370186449764,0.1978167268427936,0.252711786168359,0.1434739566449802,0.17187204997260774,0.04347803768256475,0.11051109638720535,0.18313529597571765,0.6357583412308178,0.031016296500327,0.29554930880058805,0.08810569504918242,0.13031137697541972,0.1541803565621167,0.2165175996470763,0.08714520426089467,0.031657105680173436,0.43333187242463156,0.1176386457894738,0.1916391084164656,0.15570701537841913,0.13693192180566327,0.16307390931351762,0.18159010175826829,0.13037113256624322,0.1467607365430048,0.11620612142046671,0.10259893778968554,0.06978640004703329,0.1691079631493878,0.12387171206802239,0.05631514577652663,0.09903228011451515,0.0,0.06196069237726565,0.12136207658950615,0.0951720167134843,0.2698737480866984,0.06883029305019683,0.2747107080523554
TCS.NS,0.2373384995310165,0.10108496742167761,0.0420304652059732,0.24595263020570424,0.13659862123325994,0.20345282700674683,0.1701135055502283,0.15095125590357228,0.1820166211741997,0.1758425439287522,0.0907127341721482,0.21115621897145176,0.1981105157327232,0.13712668163815112,0.09907326426695207,0.04892427313838965,0.049359861615283385,0.15677892773391533,0.540026773331677,0.05053068456016707,0.3024746630044597,0.09837227744054411,0.06122309837783979,0.14062181717576783,0.23429525743396062,0.302194659456147,0.06930937069235099,0.4011741497697391,0.12913265127024876,0.18292257456639227,0.16187640827737682,0.10528131576016453,0.1876446447289959,0.18727509328886616,0.13038147020902724,0.1454602237873901,0.10126582290189612,0.10602236231613127,0.09738677719402555,0.15336299601989656,0.11143384345871099,0.06714664803559645,0.1049509253261548,0.06196069237726565,0.0,0.06287896956879746,0.10971042611750992,0.2352905070868253,0.06313481042521984,0.2244412044552151
TECHM.NS,0.3427187000225421,0.1874138970253174,0.07777717226551728,0.282660915680522,0.2199855350413753,0.2850152741284654,0.17748437045647458,0.13447929773579903,0.2470878854955435,0.2185915061691195,0.19328507472942202,0.30793169257044073,0.30418777502977845,0.2354229547747123,0.12590626492121448,0.100704822780177,0.09503981596899402,0.1977883962270125,0.5149247734694036,0.08166461588384855,0.38646687294742066,0.15686338786559617,0.0609813362462891,0.19090936091416255,0.33488865117777356,0.5070964189152929,0.13271471717363337,0.40323499759941983,0.2097167291798402,0.2499375081636236,0.27061322482528527,0.2181825229083445,0.2926171479760248,0.2664326608878219,0.20651936341427146,0.21835127003472798,0.20789607495589513,0.16263186248056138,0.16684205074969483,0.20450856082735602,0.18628935053014517,0.17208134349675464,0.19221416992503348,0.12136207658950615,0.06287896956879746,0.0,0.18006325695900705,0.26691956338650047,0.1173128390374063,0.15783689436407788
TITAN.NS,0.1360128555672171,0.12483636081723681,0.05064795983594228,0.2525241239512521,0.08166686771254039,0.2029574436226539,0.16431582563145108,0.14136392813800958,0.15386230534988354,0.14873930558730297,0.09298600314073235,0.13408971667403224,0.26236321553764796,0.10898545209425636,0.37997660944979017,0.06643851066224782,0.09690784616000292,0.21938200382026207,0.766676292201119,0.09646554768207971,0.27507654276251625,0.05279955169682038,0.22204379817219488,0.15488449026555595,0.08306925961713463,0.7302041357875011,0.08019064928098885,0.47824991068749834,0.04942620826668653,0.16350604565239601,0.08489394069958056,0.09015426762762124,0.0706858002102847,0.12416276428082307,0.1000301937239696,0.11523646378546082,0.10405427132639755,0.06856843298942739,0.06263164453581938,0.1633513678358891,0.08407382244588368,0.06659747392956572,0.06325384732591899,0.0951720167134843,0.10971042611750992,0.18006325695900705,0.0,0.2503546014986976,0.08761845522164224,0.48139852650790926
TRENT.NS,0.41802492722140094,0.12445034994221282,0.20214671085902658,0.6887402972095006,0.19074130090493857,0.029466965070463313,0.5448444780539771,0.4642612291118243,0.03944719106871064,0.027595022818127757,0.12543420338719602,0.06655982290998042,0.18278551597734005,0.11383958375097791,0.09985650101493804,0.15955967732608378,0.11183225333762936,0.4165043980560891,0.6676070960365305,0.21559707345611023,0.4291553601077749,0.15804990750597092,0.3720871726695022,0.0423893732446593,0.20458027087930497,0.2781251123169213,0.27013565633195236,0.8114877757618927,0.12921705390697524,0.04061068569904536,0.13930653592126785,0.08173345057437853,0.20389943217199347,0.0488010848486774,0.08657328358249705,0.050422933449099094,0.27471741072083034,0.15802545552866853,0.15763214445324958,0.04794209514561487,0.06743275903003965,0.21875581115765552,0.13979279336933004,0.2698737480866984,0.2352905070868253,0.26691956338650047,0.2503546014986976,0.0,0.13423085822636327,0.6213420497007291
ULTRACEMCO.NS,0.2515037145060538,0.06287215867797646,0.04451835122658454,0.34581422383995797,0.054922976773523424,0.10246535967087422,0.23345012919918384,0.2059041400425229,0.08195871021399559,0.08762823432452493,0.07016125303080001,0.10693491903900187,0.14482466739540045,0.07063655655128454,0.1145473912670385,0.02478628038077202,0.03787272964529964,0.1646758545308331,0.5455853551096094,0.06755645799740273,0.2615051715491835,0.050032661516811405,0.1762719853125062,0.059560302633152484,0.1337871124770581,0.3186731050146442,0.06714487174084571,0.49257996898186884,0.04558879245690994,0.08680513964755443,0.09788799349455035,0.050756001059119926,0.09600446908470228,0.08550814759967817,0.06961505995034878,0.06792518374410639,0.1408928694897581,0.07366623907943781,0.053659510079073436,0.05532065768414951,0.05840447151537276,0.062067210426122066,0.05648846080853065,0.06883029305019683,0.06313481042521984,0.1173128390374063,0.08761845522164224,0.13423085822636327,0.0,0.37175149471528535
WIPRO.NS,0.5574640115866086,0.4191277562622002,0.3098435128372583,0.3051996139571158,0.5241292657258418,0.6080931153005579,0.2662116914905671,0.25442482857109205,0.6055022451355934,0.5878042335424198,0.4573011514670263,0.6825125438373374,0.5052005887635517,0.5557958906416861,0.4827902561226628,0.3447334881354618,0.35752728757544094,0.34791995146046195,0.43180816138159284,0.27654998846787726,0.5907850273293206,0.47116723383067627,0.12604058687511588,0.5123739673634724,0.7425641080149136,0.37177979879397816,0.32229225818666185,0.36242734080746186,0.5551291075175544,0.6150546516717803,0.6191803011553594,0.7311505692785225,0.6164752381763787,0x6404797361777634,0.5390861367167006,0.5681814684336431,0.4057577849667974,0.46046745146324053,0.4597386797884897,0.5171881366722619,0.5246885840024705,0.3742653227178532,0.4881286645383981,0.2747107080523554,0.2244412044552151,0.15783689436407788,0.48139852650790926,0.6213420497007291,0.37175149471528535,0.0`;

        // Parse the gravity data from the CSV content
        const gravityCsvContent = `,Ticker,Weight,total_gravity
1,RELIANCE.NS,9.26,2577.141684
2,HDFCBANK.NS,7.48,1504.555889
3,BHARTIARTL.NS,5.87,3166.782656
4,TCS.NS,5.26,2077.427873
5,ICICIBANK.NS,4.96,3115.292841
6,SBIN.NS,4.01,2668.404939
7,BAJFINANCE.NS,3.25,731.0000293
8,INFY.NS,2.99,754.0571128
9,HINDUNILVR.NS,2.95,461.4190752
10,LT.NS,2.6,1502.437077
11,MARUTI.NS,2.51,1153.028689
12,ITC.NS,2.48,805.1376879
13,M&M.NS,2.17,1285.708831
14,KOTAKBANK.NS,2.15,235.4704532
15,HCLTECH.NS,2.01,992.0187732
16,SUNPHARMA.NS,1.95,1408.786644
17,AXISBANK.NS,1.82,828.53207
18,ULTRACEMCO.NS,1.78,994.6316332
19,ETERNAL.NS,1.65,368.0821681
20,BAJAJFINSV.NS,1.63,435.8378326
21,NTPC.NS,1.62,1172.483148
22,TITAN.NS,1.58,701.9698034
23,ADANIPORTS.NS,1.56,717.7927442
24,ONGC.NS,1.53,916.3945426
25,BEL.NS,1.47,1055.698469
26,ADANIENT.NS,1.44,315.8299177
27,JSWSTEEL.NS,1.4,620.1604427
28,POWERGRID.NS,1.33,1099.618016
29,WIPRO.NS,1.3,164.4473124
30,BAJAJ-AUTO.NS,1.25,572.9356327
31,NESTLEIND.NS,1.2,419.0590799
32,COALINDIA.NS,1.17,721.9921983
33,ASIANPAINT.NS,1.13,192.4503795
34,INDIGO.NS,1.11,0
35,TATASTEEL.NS,1.06,453.661123
36,JIOFIN.NS,0.97,183.7630658
37,GRASIM.NS,0.95,655.0120298
38,EICHERMOT.NS,0.94,491.5185206
39,SBILIFE.NS,0.9,426.8002476
40,HINDALCO.NS,0.86,393.1494392
41,TRENT.NS,0.83,350.7419166
42,HDFCLIFE.NS,0.78,60.3049698
43,TATAMOTORS.NS,0.72,415.5517003
44,TECHM.NS,0.7,209.3327309
45,CIPLA.NS,0.62,316.4029715
46,SHRIRAMFIN.NS,0.62,297.58683
47,MAXHEALTH.NS,0.56,379.1732275
48,TATACONSUM.NS,0.56,271.5341263
49,APOLLOHOSP.NS,0.55,314.1793572
50,DRREDDY.NS,0.51,110.4837305`;

        // Parse the distance matrix from the CSV content
        function parseDistanceMatrix(csv) {
            const lines = csv.trim().split('\n');
            const stockNames = lines[0].split(',').slice(1); // Remove the first empty cell
            
            // Create the distance matrix
            const distanceMatrix = [];
            for (let i = 1; i < lines.length; i++) {
                const row = lines[i].split(',');
                const distances = row.slice(1).map(parseFloat); // Remove the stock name and parse distances
                distanceMatrix.push(distances);
            }
            
            return { stockNames, distanceMatrix };
        }

        // Parse the gravity data from the CSV content
        function parseGravityData(csv) {
            const lines = csv.trim().split('\n');
            const gravityData = {};
            
            for (let i = 1; i < lines.length; i++) {
                const row = lines[i].split(',');
                const ticker = row[1];
                const weight = parseFloat(row[2]);
                const totalGravity = parseFloat(row[3]) || 0; // Handle empty values
                
                gravityData[ticker] = { weight, totalGravity };
            }
            
            return gravityData;
        }

        // Initialize Three.js scene
        let scene, camera, renderer, controls;
        let planets = [];
        let orbits = [];
        let physicsEnabled = true;
        let showOrbits = true;
        let showMassCenter = true;
        let showMassLines = false;
        let selectedPlanet = null;
        let timeScale = 1;
        let gravityStrength = 1;
        let sizeScale = 1;
        let massCenter = null;
        let massCenterVisual = null;
        let massLines = [];
        
        function init() {
            // Hide loading message
            document.getElementById('loading').style.display = 'none';
            
            // Parse the distance matrix and gravity data
            const { stockNames, distanceMatrix } = parseDistanceMatrix(distanceCsvContent);
            const gravityData = parseGravityData(gravityCsvContent);
            
            // Compute 3D positions based on distance matrix
            const positions = computePositionsWithMDS(distanceMatrix);
            
            // Set up Three.js
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000011);
            
            // Add stars in the background
            addStars();
            
            // Create center of mass visual
            createMassCenter();
            
            // Create planets with gravity data
            createPlanets(stockNames, positions, gravityData);
            
            // Create orbits
            if (showOrbits) {
                createOrbits(positions);
            }
            
            // Set up camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 15;
            
            // Set up renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);
            
            // Add orbit controls
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            
            // Add lighting
            const ambientLight = new THREE.AmbientLight(0x333333);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 3, 5);
            scene.add(directionalLight);
            
            // Add event listeners
            window.addEventListener('resize', onWindowResize);
            setupEventListeners();
            
            // Start animation
            animate();
        }
        
        function createMassCenter() {
            // Create a visual representation of the center of mass
            const geometry = new THREE.SphereGeometry(0.2, 16, 16);
            const material = new THREE.MeshBasicMaterial({ 
                color: 0xffff00,
                transparent: true,
                opacity: 0.7
            });
            
            massCenterVisual = new THREE.Mesh(geometry, material);
            scene.add(massCenterVisual);
            
            // Initialize mass center at origin
            massCenter = new THREE.Vector3(0, 0, 0);
        }
        
        function calculateCenterOfMass() {
            let totalMass = 0;
            const centerOfMass = new THREE.Vector3(0, 0, 0);
            
            planets.forEach(planet => {
                const mass = planet.userData.mass;
                totalMass += mass;
                centerOfMass.add(planet.position.clone().multiplyScalar(mass));
            });
            
            centerOfMass.divideScalar(totalMass);
            return centerOfMass;
        }
        
        function updateMassCenter() {
            const newCenter = calculateCenterOfMass();
            massCenter.copy(newCenter);
            
            // Update visual position
            massCenterVisual.position.copy(newCenter);
            
            // Update info display
            document.getElementById('mass-info').innerHTML = `
                <p>X: ${newCenter.x.toFixed(2)}</p>
                <p>Y: ${newCenter.y.toFixed(2)}</p>
                <p>Z: ${newCenter.z.toFixed(2)}</p>
            `;
        }
        
        function updateMassLines() {
            // Clear existing mass lines
            massLines.forEach(line => {
                document.body.removeChild(line);
            });
            massLines = [];
            
            if (!showMassLines) return;
            
            // Create lines from each planet to the center of mass
            planets.forEach(planet => {
                const line = document.createElement('div');
                line.className = 'mass-line';
                
                // Get planet position in screen coordinates
                const planetPosition = planet.position.clone();
                planetPosition.project(camera);
                
                // Get center of mass position in screen coordinates
                const centerPosition = massCenter.clone();
                centerPosition.project(camera);
                
                // Convert to screen coordinates
                const x1 = (planetPosition.x * 0.5 + 0.5) * window.innerWidth;
                const y1 = (-planetPosition.y * 0.5 + 0.5) * window.innerHeight;
                const x2 = (centerPosition.x * 0.5 + 0.5) * window.innerWidth;
                const y2 = (-centerPosition.y * 0.5 + 0.5) * window.innerHeight;
                
                // Calculate line properties
                const length = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));
                const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
                
                // Set line style
                line.style.width = `${length}px`;
                line.style.height = '1px';
                line.style.left = `${x1}px`;
                line.style.top = `${y1}px`;
                line.style.transform = `rotate(${angle}deg)`;
                
                document.body.appendChild(line);
                massLines.push(line);
            });
        }
        
        function addStars() {
            const starsGeometry = new THREE.BufferGeometry();
            const starsCount = 10000;
            const positions = new Float32Array(starsCount * 3);
            
            for (let i = 0; i < starsCount * 3; i++) {
                positions[i] = (Math.random() - 0.5) * 2000;
            }
            
            starsGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            
            const starsMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 1,
                sizeAttenuation: true
            });
            
            const stars = new THREE.Points(starsGeometry, starsMaterial);
            scene.add(stars);
        }
        
        function createPlanets(stockNames, positions, gravityData) {
            const colors = [
                0xff6b6b, 0x4ecdc4, 0x45b7d1, 0x96ceb4, 0xfeca57,
                0xff9ff3, 0x54a0ff, 0x5f27cd, 0x00d2d3, 0xff9f43,
                0x10ac84, 0xee5a24, 0x0984e3, 0xa29bfe, 0xfd79a8,
                0xe17055, 0x00b894, 0x6c5ce7, 0xfdcb6e, 0xe84393,
                0x00cec9, 0x81ecec, 0x74b9ff, 0xa29bfe, 0xdfe6e9,
                0xb2bec3, 0x636e72, 0x2d3436, 0xf39c12, 0xe74c3c,
                0x9b59b6, 0x3498db, 0x1abc9c, 0xf1c40f, 0xe67e22,
                0x34495e, 0x16a085, 0x27ae60, 0x2980b9, 0x8e44ad,
                0x2c3e50, 0xf1a9a0, 0xd2527f, 0x9b59b6, 0x3498db,
                0x1abc9c, 0xf1c40f, 0xe67e22, 0xe74c3c, 0xecf0f1
            ];
            
            // Find min and max values for normalization
            let minWeight = Infinity, maxWeight = -Infinity;
            let minGravity = Infinity, maxGravity = -Infinity;
            
            for (const ticker in gravityData) {
                const data = gravityData[ticker];
                if (data.weight < minWeight) minWeight = data.weight;
                if (data.weight > maxWeight) maxWeight = data.weight;
                if (data.totalGravity < minGravity) minGravity = data.totalGravity;
                if (data.totalGravity > maxGravity) maxGravity = data.totalGravity;
            }
            
            for (let i = 0; i < stockNames.length; i++) {
                const name = stockNames[i];
                const position = positions[i];
                const gravityInfo = gravityData[name] || { weight: 1, totalGravity: 500 };
                
                // Calculate planet size based on weight (normalized)
                const normalizedWeight = (gravityInfo.weight - minWeight) / (maxWeight - minWeight);
                const radius = (0.1 + normalizedWeight * 0.3) * sizeScale; // Base size + weight influence
                
                // Calculate momentum (we'll use total gravity as a proxy for momentum)
                // Higher total gravity = higher momentum = faster revolution
                const normalizedGravity = (gravityInfo.totalGravity - minGravity) / (maxGravity - minGravity);
                const momentum = 0.0005 + normalizedGravity * 0.002; // Base momentum + gravity influence
                
                const geometry = new THREE.SphereGeometry(radius, 32, 32);
                const color = colors[i % colors.length];
                const material = new THREE.MeshPhongMaterial({ 
                    color: color,
                    shininess: 30
                });
                
                const planet = new THREE.Mesh(geometry, material);
                planet.position.set(position.x, position.y, position.z);
                
                // Store planet data for physics simulation
                planet.userData = { 
                    name: name, 
                    originalColor: color,
                    weight: gravityInfo.weight,
                    totalGravity: gravityInfo.totalGravity,
                    momentum: momentum,
                    velocity: new THREE.Vector3(
                        (Math.random() - 0.5) * 0.005,
                        (Math.random() - 0.5) * 0.005,
                        (Math.random() - 0.5) * 0.005
                    ),
                    mass: gravityInfo.weight, // Use weight as mass for physics
                    radius: radius,
                    originalRadius: radius
                };
                
                scene.add(planet);
                planets.push(planet);
                
                // Add label
                addLabel(planet, name);
            }
        }
        
        function addLabel(planet, name) {
            // Create a canvas for the text
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = 256;
            canvas.height = 128;
            
            context.fillStyle = 'rgba(0, 0, 0, 0.7)';
            context.fillRect(0, 0, canvas.width, canvas.height);
            
            context.font = 'bold 20px Arial';
            context.fillStyle = 'white';
            context.textAlign = 'center';
            
            // Split long names
            const words = name.split('.');
            if (words[0].length > 10) {
                const mid = Math.floor(words[0].length / 2);
                const firstPart = words[0].substring(0, mid);
                const secondPart = words[0].substring(mid);
                context.fillText(firstPart, canvas.width / 2, canvas.height / 2 - 10);
                context.fillText(secondPart, canvas.width / 2, canvas.height / 2 + 10);
            } else {
                context.fillText(words[0], canvas.width / 2, canvas.height / 2);
            }
            
            const texture = new THREE.CanvasTexture(canvas);
            const material = new THREE.SpriteMaterial({ 
                map: texture,
                transparent: true
            });
            
            const sprite = new THREE.Sprite(material);
            sprite.scale.set(1.5, 0.75, 1);
            sprite.position.set(0, planet.geometry.parameters.radius + 0.3, 0);
            planet.add(sprite);
        }
        
        function createOrbits(positions) {
            for (let i = 0; i < positions.length; i++) {
                const position = positions[i];
                const radius = Math.sqrt(position.x * position.x + position.z * position.z);
                
                const orbitGeometry = new THREE.RingGeometry(radius - 0.01, radius + 0.01, 64);
                const orbitMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0x444444, 
                    side: THREE.DoubleSide,
                    transparent: true,
                    opacity: 0.2
                });
                
                const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
                orbit.rotation.x = Math.PI / 2;
                scene.add(orbit);
                orbits.push(orbit);
            }
        }
        
        function computePositionsWithMDS(distanceMatrix) {
            const n = distanceMatrix.length;
            
            // Use a spherical coordinate system for better distribution
            const positions = [];
            const maxDistance = Math.max(...distanceMatrix.flat());
            
            // Scale down the distances to keep the system more compact
            const scaleFactor = 0.3;
            
            for (let i = 0; i < n; i++) {
                // Use a spherical coordinate system for better distribution
                const phi = Math.acos(-1 + (2 * i) / n);
                const theta = Math.sqrt(n * Math.PI) * phi;
                
                const x = maxDistance * scaleFactor * Math.sin(phi) * Math.cos(theta);
                const y = maxDistance * scaleFactor * Math.sin(phi) * Math.sin(theta);
                const z = maxDistance * scaleFactor * Math.cos(phi);
                
                positions.push({ x, y, z });
            }
            
            return positions;
        }
        
        function setupEventListeners() {
            // Raycaster for planet selection
            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();
            
            function onMouseClick(event) {
                mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
                
                raycaster.setFromCamera(mouse, camera);
                
                const intersects = raycaster.intersectObjects(planets);
                
                if (intersects.length > 0) {
                    const planet = intersects[0].object;
                    
                    // Reset previously selected planet
                    if (selectedPlanet) {
                        selectedPlanet.material.color.setHex(selectedPlanet.userData.originalColor);
                        selectedPlanet.scale.set(1, 1, 1);
                    }
                    
                    // Highlight selected planet
                    selectedPlanet = planet;
                    planet.material.color.setHex(0xffff00);
                    planet.scale.set(1.5, 1.5, 1.5);
                    
                    // Update info panel
                    document.getElementById('planet-info').innerHTML = `
                        <h3>${planet.userData.name}</h3>
                        <p>Weight: ${planet.userData.weight.toFixed(2)}</p>
                        <p>Total Gravity: ${planet.userData.totalGravity.toFixed(2)}</p>
                        <p>Momentum: ${(planet.userData.momentum * 1000).toFixed(2)}</p>
                        <p>Mass: ${planet.userData.mass.toFixed(2)}</p>
                    `;
                }
            }
            
            window.addEventListener('click', onMouseClick);
            
            // Control buttons
            document.getElementById('togglePhysics').addEventListener('click', function() {
                physicsEnabled = !physicsEnabled;
                this.textContent = `Physics: ${physicsEnabled ? 'ON' : 'OFF'}`;
            });
            
            document.getElementById('toggleOrbits').addEventListener('click', function() {
                showOrbits = !showOrbits;
                this.textContent = `Show Orbits: ${showOrbits ? 'ON' : 'OFF'}`;
                
                // Toggle orbit visibility
                orbits.forEach(orbit => {
                    orbit.visible = showOrbits;
                });
            });
            
            document.getElementById('toggleMassCenter').addEventListener('click', function() {
                showMassCenter = !showMassCenter;
                this.textContent = `Show Mass Center: ${showMassCenter ? 'ON' : 'OFF'}`;
                
                // Toggle mass center visibility
                massCenterVisual.visible = showMassCenter;
            });
            
            document.getElementById('toggleMassLines').addEventListener('click', function() {
                showMassLines = !showMassLines;
                this.textContent = `Show Mass Lines: ${showMassLines ? 'ON' : 'OFF'}`;
            });
            
            document.getElementById('resetView').addEventListener('click', function() {
                controls.reset();
                camera.position.set(0, 0, 15);
            });
            
            // Time scale slider
            document.getElementById('timeScale').addEventListener('input', function() {
                timeScale = parseFloat(this.value);
            });
            
            // Gravity strength slider
            document.getElementById('gravityStrength').addEventListener('input', function() {
                gravityStrength = parseFloat(this.value);
            });
            
            // Size scale slider
            document.getElementById('sizeScale').addEventListener('input', function() {
                sizeScale = parseFloat(this.value);
                
                // Update planet sizes
                planets.forEach(planet => {
                    const newRadius = planet.userData.originalRadius * sizeScale;
                    planet.scale.set(newRadius / planet.userData.radius, newRadius / planet.userData.radius, newRadius / planet.userData.radius);
                    planet.userData.radius = newRadius;
                });
            });
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function applyGravity() {
            const G = 0.00005 * gravityStrength; // Gravitational constant
            
            // Calculate forces between all pairs of planets
            for (let i = 0; i < planets.length; i++) {
                const planetA = planets[i];
                const posA = planetA.position;
                const massA = planetA.userData.mass;
                
                for (let j = i + 1; j < planets.length; j++) {
                    const planetB = planets[j];
                    const posB = planetB.position;
                    const massB = planetB.userData.mass;
                    
                    // Calculate distance between planets
                    const direction = new THREE.Vector3().subVectors(posB, posA);
                    const distance = direction.length();
                    
                    // Avoid division by zero and very close encounters
                    if (distance < 0.1) continue;
                    
                    // Calculate gravitational force
                    const forceMagnitude = G * (massA * massB) / (distance * distance);
                    direction.normalize().multiplyScalar(forceMagnitude);
                    
                    // Apply force to both planets (Newton's third law)
                    const accelerationA = direction.clone().multiplyScalar(1 / massA);
                    const accelerationB = direction.clone().multiplyScalar(-1 / massB);
                    
                    planetA.userData.velocity.add(accelerationA.multiplyScalar(timeScale * 0.1));
                    planetB.userData.velocity.add(accelerationB.multiplyScalar(timeScale * 0.1));
                }
            }
        }
        
        function updatePlanetPositions() {
            // Calculate center of mass
            updateMassCenter();
            
            // Update planet positions based on velocity
            planets.forEach(planet => {
                // Apply velocity
                planet.position.add(planet.userData.velocity.clone().multiplyScalar(timeScale));
                
                // Add some momentum-based movement around center of mass
                const toCenter = new THREE.Vector3().subVectors(massCenter, planet.position);
                const distanceToCenter = toCenter.length();
                
                if (distanceToCenter > 0.1) {
                    // Tangential velocity for orbital motion
                    const tangent = new THREE.Vector3().crossVectors(toCenter, new THREE.Vector3(0, 1, 0)).normalize();
                    const orbitalVelocity = tangent.multiplyScalar(planet.userData.momentum * timeScale * distanceToCenter);
                    
                    planet.userData.velocity.add(orbitalVelocity);
                }
                
                // Apply damping to prevent velocity from growing too large
                planet.userData.velocity.multiplyScalar(0.995);
                
                // Add a weak central force to keep planets from flying away
                const toCenterForce = new THREE.Vector3().subVectors(massCenter, planet.position);
                const distance = toCenterForce.length();
                if (distance > 10) { // If planet is too far from center
                    toCenterForce.normalize().multiplyScalar(0.0001 * distance);
                    planet.userData.velocity.add(toCenterForce);
                }
            });
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            if (physicsEnabled) {
                // Apply gravitational forces
                applyGravity();
                
                // Update planet positions
                updatePlanetPositions();
            } else {
                // Simple revolution around center of mass
                planets.forEach(planet => {
                    const toCenter = new THREE.Vector3().subVectors(massCenter, planet.position);
                    const distance = toCenter.length();
                    
                    if (distance > 0.1) {
                        // Calculate tangential direction
                        const tangent = new THREE.Vector3().crossVectors(toCenter, new THREE.Vector3(0, 1, 0)).normalize();
                        
                        // Move planet in tangential direction based on momentum
                        const movement = tangent.multiplyScalar(planet.userData.momentum * timeScale * distance);
                        planet.position.add(movement);
                    }
                });
                
                // Update center of mass display
                updateMassCenter();
            }
            
            // Update mass lines
            updateMassLines();
            
            // Update controls
            controls.update();
            
            // Render the scene
            renderer.render(scene, camera);
        }
        
        // Initialize the application
        init();
    </script>
</body>
</html>